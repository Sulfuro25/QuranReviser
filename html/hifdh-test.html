<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hifdh Test</title>
  <link rel="icon" type="image/svg+xml" href="../assets/img/favicon/favicon.svg">
  <link rel="alternate icon" href="../assets/img/favicon/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../assets/img/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../assets/img/favicon/web-app-manifest-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="../assets/img/favicon/web-app-manifest-512x512.png">
  <link rel="manifest" href="../assets/img/favicon/site.webmanifest">
  <meta name="theme-color" content="#0c3e18">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="stylesheet" href="../assets/css/pages.css">
</head>

<body>
    <header class="app-header">
    <div class="brand">
      <a class="brand-logo" href="index.html" aria-label="Quran Reviser home">
        <img src="../assets/img/favicon/favicon.svg" alt="Quran Reviser logo">
      </a>
      <h1>Hifdh Test</h1>
    </div>
    <div class="header-actions">
      <a class="btn secondary" href="settings.html" title="Open settings" aria-label="Settings">⚙️</a>
    </div>
  </header>

  <main class="shell">
    <section class="panel" id="setup-section" aria-label="Test setup">
      <div class="row">
        <div class="field">
          <label class="muted">Scope</label>
          <select id="scope-kind">
            <option value="progress">My Hifdh Progress</option>
            <option value="surahs">Surah range</option>
            <option value="juz">Juz range</option>
            <option value="hizb">Hizb range</option>
          </select>
        </div>
        <div class="field" id="scope-surahs" hidden>
          <label class="muted">Surahs (e.g., 1, 36, 67-70)</label>
          <input id="scope-surahs-input" type="text" placeholder="1, 36, 67-70">
        </div>
        <div class="field" id="scope-juz" hidden>
          <label class="muted">Juz (e.g., 1-3)</label>
          <input id="scope-juz-input" type="text" placeholder="1-3">
        </div>
        <div class="field" id="scope-hizb" hidden>
          <label class="muted">Hizb (e.g., 1, 10-15)</label>
          <input id="scope-hizb-input" type="text" placeholder="1, 10-15">
        </div>
      </div>
      <div class="row" style="margin-top:8px;">
        <div class="field">
          <label class="muted">Mode</label>
          <select id="mode">
            <option value="recite">1) Recite next X verses</option>
            <option value="mcq">2) Pick the next verse (5 choices)</option>
            <option value="order">3) Order the page</option>
            <option value="fill">4) Fill in the blanks</option>
            <option value="audio">5) Audio-only prompt</option>
          </select>
        </div>
        <div class="field" id="x-wrapper">
          <label class="muted">How many verses (X)</label>
          <input id="x-count" type="number" min="1" max="20" value="3">
        </div>
        <div class="field" id="recite-meta-wrapper">
          <label class="option"><input type="checkbox" id="recite-show-meta" checked> Show verse number and surah name
            for first verse</label>
        </div>
        <div class="field" id="font-wrapper">
          <label class="muted">Arabic font size</label>
          <input id="font-px" type="number" min="18" max="60" value="36">
        </div>
        <div class="field">
          <label class="muted">Tajweed coloring</label>
          <select id="tajweed">
            <option value="off">Off</option>
            <option value="on">On (if available)</option>
          </select>
        </div>
        <div class="field">
          <label class="muted">Timer per question (seconds)</label>
          <div style="display:flex; gap:8px; align-items:center;">
            <label class="option"><input type="checkbox" id="timer-on"> Enable</label>
            <input id="timer-sec" type="number" min="5" step="5" value="30" style="width:100px;">
          </div>
        </div>
        
        <div class="field" style="align-self:flex-end;">
          <button id="start" class="btn primary">Start</button>
        </div>
      </div>
    </section>

    <div id="timer-view" class="muted" style="text-align:right; display:none;"></div>

    <section class="panel" id="recite-section" hidden>
      <div class="muted">Prompt</div>
      <div id="recite-prompt" class="question">—</div>
      <div class="row">
        <button id="rec-main-btn" class="btn primary">Start Recording</button>
        <audio id="rec-audio" controls class="hidden"></audio>
      </div>
      <div id="rec-answer" class="question hidden"></div>
    </section>

    <section class="panel" id="mcq-section" hidden>
      <div class="muted">Prompt</div>
      <div id="mcq-prompt" class="question">—</div>
      <div class="choices" id="mcq-choices"></div>
      <div class="row">
        <button id="mcq-next" class="btn secondary">Next</button>
      </div>
    </section>

    <section class="panel" id="order-section" hidden>
      <div class="muted">Arrange the verses to correct page order</div>
      <ol class="draggable-list" id="order-list"></ol>
      <div class="row">
        <button id="order-check" class="btn primary">Check Order</button>
        <button id="order-next" class="btn secondary">Next Page</button>
      </div>
      <div id="order-result" class="muted"></div>
    </section>

    <section class="panel" id="fill-section" hidden>
      <div class="muted">Fill in the missing word(s)</div>
      <div id="fill-question" class="question"></div>
      <div class="row">
        <button id="fill-check" class="btn primary">Check</button>
        <button id="fill-next" class="btn secondary">Next</button>
      </div>
      <div id="fill-result" class="muted"></div>
    </section>

    <section class="panel" id="audioonly-section" hidden>
      <div class="muted">Listen, then continue with the next ayah</div>
      <div class="row">
        <button id="audio-play" class="btn primary">Play Prompt</button>
        <button id="audio-replay" class="btn secondary">Replay</button>
        <button id="audio-reveal" class="btn">Reveal Answer</button>
        <button id="audio-next" class="btn secondary">Next</button>
      </div>
      <div id="audio-status" class="muted"></div>
      <div id="audio-answer" class="question hidden"></div>
    </section>
  </main>

  <audio id="audio" preload="none" class="hidden"></audio>

<script src="../assets/js/core/profiles.js"></script>
<script src="../assets/js/core/prefs.js"></script>
<script src="../assets/js/core/utils.js"></script>
<script src="../assets/js/core/api.js"></script>
<script src="../assets/js/hifdh-test.js"></script>
</body>

</html>
