<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
  <title>Quran Mushaf</title>
  <link rel="icon" type="image/svg+xml" href="../assets/img/favicon/favicon.svg">
  <link rel="alternate icon" href="../assets/img/favicon/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="../assets/img/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="192x192" href="../assets/img/favicon/web-app-manifest-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="../assets/img/favicon/web-app-manifest-512x512.png">
  <link rel="manifest" href="../assets/img/favicon/site.webmanifest">
  <meta name="theme-color" content="#0c3e18">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <link rel="stylesheet" href="../assets/css/pages.css" />
  <link rel="stylesheet" href="../assets/css/mushaf.css" />
  <link rel="stylesheet" href="../assets/css/mobile-enhancements.css" />
  <!-- Compatibility scripts (load first) -->
  <script src="../assets/js/polyfills.js"></script>
  <script src="../assets/js/compat.js"></script>
</head>
<body class="page-mushaf" data-mode="mushaf">
  <header class="app-header" id="mushaf-header">
    <div class="brand">
      <a class="brand-logo" href="index.html" aria-label="Quran Reviser home">
        <img src="../assets/img/favicon/favicon.svg" alt="Quran Reviser logo">
      </a>
      <div class="brand-copy">
        <h1 data-i18n="quranMushaf">Quran Mushaf</h1>
        <p class="brand-tagline" data-i18n="browseByPage">Browse and read page by page</p>
      </div>
    </div>
    <nav class="primary-nav" aria-label="Primary">
      <a class="nav-link" href="index.html"><ion-icon name="home-outline"></ion-icon><span data-i18n="home">Home</span></a>
      <a class="nav-link" href="reader.html"><ion-icon name="book-outline"></ion-icon><span data-i18n="reader">Reader</span></a>
      <a class="nav-link" href="hifdh.html"><ion-icon name="bar-chart-outline"></ion-icon><span data-i18n="hifdh">Hifdh</span></a>
      <a class="nav-link" href="hifdh-test.html"><ion-icon name="flash-outline"></ion-icon><span data-i18n="hifdhTest">Test</span></a>
      <a class="nav-link" href="tajwid.html"><ion-icon name="color-palette-outline"></ion-icon><span data-i18n="tajwid">Tajwid</span></a>
      <a class="nav-link" href="settings.html"><ion-icon name="settings-outline"></ion-icon><span data-i18n="settings">Settings</span></a>
    </nav>
    <div class="header-actions">
    </div>
  </header>

  <!-- Landing Page: Surah Selection -->
  <section id="mushaf-landing" class="mushaf-landing">
    <div class="landing-hero">
      <div class="hero-icon">
        <ion-icon name="book"></ion-icon>
      </div>
      <h1 class="hero-title" data-i18n="mushafBrowse">Browse the Mushaf</h1>
      <p class="hero-desc" data-i18n="selectWhereToStart">Select where to start reading</p>
      
      <!-- Browse Tabs -->
      <div class="browse-tabs">
        <button class="tab-btn active" data-tab="surahs">
          <ion-icon name="book-outline"></ion-icon>
          <span data-i18n="bySurah">By Surah</span>
        </button>
        <button class="tab-btn" data-tab="juz">
          <ion-icon name="bookmark-outline"></ion-icon>
          <span data-i18n="byJuz">By Juz</span>
        </button>
        <button class="tab-btn" data-tab="hizb">
          <ion-icon name="albums-outline"></ion-icon>
          <span data-i18n="byHizb">By Hizb</span>
        </button>
      </div>
      
      <div class="landing-search">
        <ion-icon name="search-outline"></ion-icon>
        <input type="search" id="landing-search" data-i18n-placeholder="search" placeholder="Search..." />
      </div>
    </div>
    
    <div class="browse-content">
      <!-- Surahs Tab -->
      <div id="tab-surahs" class="tab-content active">
        <div class="surah-grid-container">
          <div id="surah-grid-landing" class="surah-grid"></div>
        </div>
      </div>
      
      <!-- Juz Tab -->
      <div id="tab-juz" class="tab-content">
        <div class="juz-grid-container">
          <div id="juz-grid-landing" class="juz-grid"></div>
        </div>
      </div>
      
      <!-- Hizb Tab -->
      <div id="tab-hizb" class="tab-content">
        <div class="hizb-grid-container">
          <div id="hizb-grid-landing" class="hizb-grid"></div>
        </div>
      </div>
    </div>
  </section>

  <div class="toolbar compact" id="mushaf-toolbar" style="display: none;">
    <div class="toolbar-content">
      <div class="toolbar-left">
        <button id="back-to-landing" class="btn ghost">
          <ion-icon name="arrow-back-outline"></ion-icon>
          <span>All Surahs</span>
        </button>
        <div class="page-indicator" id="page-indicator">
          <span class="muted small">Page</span>
          <strong id="current-page-num">1</strong>
          <span class="muted small">/ 604</span>
        </div>
      </div>
      <div class="toolbar-right">
        <button id="controls-open" class="btn secondary">
          <ion-icon name="options-outline"></ion-icon>
          <span class="hide-mobile">Options</span>
        </button>
      </div>
    </div>
  </div>

  <main class="mushaf-wrap" id="mushaf-viewer" style="display: none;">
    <div class="mushaf-viewer-container">
      <button id="nav-prev" class="nav-arrow left" aria-label="Next page">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </button>
      <div class="mushaf-content">
        <div class="mushaf-image-container">
          <div class="viewer-info-overlay">
            <h2 id="current-surah-name" class="surah-name">Al-Fatihah</h2>
            <span class="page-badge-overlay" id="page-range-text">Page 1</span>
          </div>
          <img id="mushaf-img" class="mushaf-img" alt="Quran Page">
          <canvas id="mushaf-canvas" class="mushaf-img" style="display:none;"></canvas>
        </div>
        <div class="audio-controls-bar">
          <button id="prev-ayah" class="btn-icon ghost" aria-label="Previous ayah" title="Previous Ayah">
            <ion-icon name="play-skip-back-outline"></ion-icon>
          </button>
          <button id="play-pause" class="btn-icon primary" title="Play/Pause">
            <ion-icon name="play-outline"></ion-icon>
          </button>
          <button id="next-ayah" class="btn-icon ghost" aria-label="Next ayah" title="Next Ayah">
            <ion-icon name="play-skip-forward-outline"></ion-icon>
          </button>
        </div>
      </div>
      <button id="nav-next" class="nav-arrow right" aria-label="Previous page">
        <ion-icon name="chevron-forward-outline"></ion-icon>
      </button>
    </div>
  </main>
  <!-- Drawer -->
  <aside id="control-drawer" class="drawer" aria-hidden="true" tabindex="-1">
    <div class="drawer-head">
      <h2 data-i18n="options">Options</h2>
      <button id="drawer-close" class="btn ghost icon-only">
        <ion-icon name="close-outline"></ion-icon>
      </button>
    </div>
    <div class="drawer-body">
      
      <!-- Audio Playback Section -->
      <div class="drawer-section">
        <div class="section-header">
          <ion-icon name="musical-notes-outline"></ion-icon>
          <h3 data-i18n="audioPlayback">Audio Playback</h3>
        </div>
        <div class="playback-status-card" id="player-info">
          <ion-icon name="radio-outline"></ion-icon>
          <span data-i18n="noAudioLoaded">No audio loaded</span>
        </div>
        
        <div class="form-group">
          <label class="form-label">Loop Range (Optional)</label>
          <div class="range-grid">
            <div class="range-item">
              <span class="range-label">From</span>
              <select id="range-start-surah" class="form-select"></select>
              <select id="range-start-ayah" class="form-select"></select>
            </div>
            <div class="range-item">
              <span class="range-label">To</span>
              <select id="range-end-surah" class="form-select"></select>
              <select id="range-end-ayah" class="form-select"></select>
            </div>
          </div>
        </div>
        
        <label class="checkbox-label">
          <input type="checkbox" id="loop-one">
          <span>Loop current ayah only</span>
        </label>
      </div>

      <!-- Navigation Section -->
      <div class="drawer-section">
        <div class="section-header">
          <ion-icon name="compass-outline"></ion-icon>
          <h3 data-i18n="pageNavigation">Navigation</h3>
        </div>
        <div class="nav-buttons">
          <button id="prev-page" class="btn ghost">
            <ion-icon name="chevron-back-outline"></ion-icon>
            <span data-i18n="previousPage">Previous Page</span>
          </button>
          <div class="page-display" id="page-info"><span data-i18n="page">Page</span> -</div>
          <button id="next-page" class="btn ghost">
            <span data-i18n="nextPage">Next Page</span>
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </button>
        </div>
      </div>

      <!-- Notes & Tracking Section -->
      <div class="drawer-section">
        <div class="section-header">
          <ion-icon name="create-outline"></ion-icon>
          <h3 data-i18n="notesTracking">Notes & Tracking</h3>
        </div>
        
        <button class="bookmark-btn" id="bm-toggle">
          <ion-icon name="bookmark-outline"></ion-icon>
          <span data-i18n="bookmark">Bookmark this page</span>
          <span class="bookmark-status" id="bm-status"></span>
        </button>
        
        <div class="form-group">
          <label class="form-label" for="note-text" data-i18n="personalNotes">Personal Notes</label>
          <textarea id="note-text" class="form-textarea" rows="3" data-i18n-placeholder="addReflections" placeholder="Add your reflections or reminders..."></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="conf-select" data-i18n="memorizationStrength">Memorization Strength</label>
          <select id="conf-select" class="form-select">
            <option value="" data-i18n="notSet">Not set</option>
            <option value="weak" data-i18n="weakNeedsPractice">📉 Weak - Needs practice</option>
            <option value="ok" data-i18n="goodGettingThere">📊 Good - Getting there</option>
            <option value="strong" data-i18n="strongConfident">📈 Strong - Confident</option>
          </select>
        </div>
      </div>

      <!-- Keyboard Shortcuts Section -->
      <div class="drawer-section">
        <div class="section-header">
          <ion-icon name="keypad-outline"></ion-icon>
          <h3 data-i18n="keyboardShortcuts">Keyboard Shortcuts</h3>
        </div>
        <div class="shortcuts-grid">
          <div class="shortcut-item">
            <kbd>←</kbd>
            <span data-i18n="nextPage">Next page</span>
          </div>
          <div class="shortcut-item">
            <kbd>→</kbd>
            <span data-i18n="previousPage">Previous page</span>
          </div>
          <div class="shortcut-item">
            <kbd>Space</kbd>
            <span data-i18n="playPause">Play / Pause</span>
          </div>
          <div class="shortcut-item">
            <kbd>Esc</kbd>
            <span data-i18n="closeOptions">Close options</span>
          </div>
        </div>
      </div>

    </div>
  </aside>
  <div id="drawer-backdrop" class="drawer-backdrop" hidden></div>

  <audio id="audio" preload="none"></audio>

  <!-- core -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="../assets/js/i18n.js"></script>
  <script src="../assets/js/core/profiles.js"></script>
  <script src="../assets/js/core/confidence.js"></script>
  <script src="../assets/js/core/review.js"></script>
  <script src="../assets/js/core/prefs.js"></script>
  <script src="../assets/js/core/utils.js"></script>
  <script src="../assets/js/core/api.js"></script>
  <script src="../assets/js/chapters-data.js"></script>
  <script src="../assets/js/core/page-data.js"></script>
  <script src="../assets/js/core/control-panel.js"></script>
  <!-- page -->
  <script src="../assets/js/mushaf.js"></script>
  <script src="../assets/js/mobile-mushaf.js"></script>
  <script>
    // Initialize language on page load
    document.addEventListener('DOMContentLoaded', () => {
      initLanguage();
    });
  </script>
</body>
</html>



